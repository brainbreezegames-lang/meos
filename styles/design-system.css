/**
 * ═══════════════════════════════════════════════════════════════════════════
 * goOS DESIGN SYSTEM
 * ═══════════════════════════════════════════════════════════════════════════
 *
 * Single source of truth for all visual design tokens.
 * All components use these CSS variables exclusively.
 * Never hardcode colors, shadows, or radii in components.
 *
 * Theme switching: Set data-theme attribute on <html>
 * Example: document.documentElement.dataset.theme = 'appart'
 *
 * ───────────────────────────────────────────────────────────────────────────
 * TABLE OF CONTENTS
 * ───────────────────────────────────────────────────────────────────────────
 *
 * 1. APPART THEME (Default)
 *    1.1 Backgrounds
 *    1.2 Text
 *    1.3 Accent Colors
 *    1.4 Semantic Colors
 *    1.5 Borders
 *    1.6 Traffic Lights
 *    1.7 Shadows
 *    1.8 Border Radius
 *    1.9 Typography
 *    1.10 Spacing Scale (8-point grid)
 *    1.11 Blur / Glassmorphism
 *    1.12 Transitions
 *    1.13 Focus States
 *    1.14 Interactive States
 *    1.15 Component Dimensions
 *    1.16 Z-Index Scale
 *
 * 2. SCROLLBAR STYLING
 * 3. SELECTION STYLING
 * 4. REDUCED MOTION
 * 5. UTILITY CLASSES
 *
 * ═══════════════════════════════════════════════════════════════════════════
 */

/* =============================================================================
   1. APPART THEME (Default)
   Warm creative studio — cream, orange, confident
   ============================================================================= */

:root,
[data-theme="appart"],
[data-theme="brand-appart"] {
   /* ─────────────────────────────────────────────────────────────────────────
     1.1 BACKGROUNDS
     ───────────────────────────────────────────────────────────────────────── */
   --color-bg-base: #fbf9ef;
   --color-bg-gradient: linear-gradient(180deg, #fbf9ef 0%, #f5f3e9 100%);
   --color-bg-elevated: rgba(255, 255, 255, 0.85);
   --color-bg-overlay: rgba(251, 249, 239, 0.8);
   --color-bg-subtle: #f2f0e7;
   --color-bg-subtle-hover: #ebe9df;
   --color-bg-inverse: #171412;
   --color-bg-white: #ffffff;

   /* ─────────────────────────────────────────────────────────────────────────
     1.2 TEXT
     ───────────────────────────────────────────────────────────────────────── */
   --color-text-primary: #171412;
   --color-text-secondary: #4a4744;
   --color-text-muted: #8e827c;
   --color-text-inverse: #ffffff;
   --color-text-on-accent: #ffffff;

   /* ─────────────────────────────────────────────────────────────────────────
     1.3 ACCENT COLORS
     ───────────────────────────────────────────────────────────────────────── */
   --color-accent-primary: #ff7722;
   --color-accent-primary-hover: #e5691e;
   --color-accent-primary-active: #cc5d1a;
   --color-accent-primary-subtle: rgba(255, 119, 34, 0.1);
   --color-accent-primary-glow: rgba(255, 119, 34, 0.4);

   --color-accent-secondary: #3d2fa9;
   --color-accent-secondary-hover: #352994;
   --color-accent-secondary-subtle: rgba(61, 47, 169, 0.1);

   /* ─────────────────────────────────────────────────────────────────────────
     1.4 SEMANTIC COLORS
     ───────────────────────────────────────────────────────────────────────── */
   --color-success: #22c55e;
   --color-success-subtle: rgba(34, 197, 94, 0.15);
   --color-warning: #ffc765;
   --color-warning-subtle: rgba(255, 199, 101, 0.2);
   --color-error: #ff3c34;
   --color-error-subtle: rgba(255, 60, 52, 0.1);

   /* ─────────────────────────────────────────────────────────────────────────
     1.5 BORDERS
     ───────────────────────────────────────────────────────────────────────── */
   --color-border-default: rgba(23, 20, 18, 0.08);
   --color-border-subtle: rgba(23, 20, 18, 0.05);
   --color-border-strong: rgba(23, 20, 18, 0.15);

   /* ─────────────────────────────────────────────────────────────────────────
     1.6 TRAFFIC LIGHTS (Window controls)
     ───────────────────────────────────────────────────────────────────────── */
   --color-traffic-close: #ff5f57;
   --color-traffic-minimize: #ffbd2e;
   --color-traffic-maximize: #28c840;
   --color-traffic-inactive: rgba(23, 20, 18, 0.15);

   /* ─────────────────────────────────────────────────────────────────────────
     1.7 SHADOWS
     Warm shadows using rgba(23, 20, 18, ...) for cohesive warmth
     ───────────────────────────────────────────────────────────────────────── */
   --shadow-color: rgba(23, 20, 18, 0.08);
   --shadow-color-medium: rgba(23, 20, 18, 0.12);
   --shadow-color-strong: rgba(23, 20, 18, 0.15);

   --shadow-sm: 0 2px 8px rgba(23, 20, 18, 0.06);
   --shadow-md: 0 4px 20px rgba(23, 20, 18, 0.08);
   --shadow-lg: 0 8px 32px rgba(23, 20, 18, 0.12);
   --shadow-xl: 0 16px 48px rgba(23, 20, 18, 0.15);

   /* Component-specific shadows */
   --shadow-menubar: 0 4px 20px rgba(23, 20, 18, 0.06);
   --shadow-dock: 0 8px 32px rgba(23, 20, 18, 0.12);
   --shadow-window: 0 2px 4px rgba(23, 20, 18, 0.04), 0 12px 32px rgba(23, 20, 18, 0.12), 0 24px 60px rgba(23, 20, 18, 0.08);
   --shadow-dropdown: 0 8px 30px rgba(23, 20, 18, 0.15);
   --shadow-tooltip: 0 4px 12px rgba(23, 20, 18, 0.2);
   --shadow-status: 0 4px 16px rgba(23, 20, 18, 0.08);

   /* Desktop icon shadows */
   --shadow-icon: 0 2px 8px rgba(23, 20, 18, 0.06);
   --shadow-icon-hover: 0 8px 24px rgba(23, 20, 18, 0.1);
   --shadow-icon-drag: 0 20px 40px rgba(23, 20, 18, 0.2);

   /* Badge glow */
   --shadow-badge: 0 2px 6px rgba(255, 119, 34, 0.4);

   /* ─────────────────────────────────────────────────────────────────────────
     1.8 BORDER RADIUS
     Consistent radius scale for visual cohesion
     ───────────────────────────────────────────────────────────────────────── */
   --radius-xs: 4px;
   --radius-sm: 6px;
   --radius-md: 10px;
   --radius-lg: 12px;
   --radius-xl: 14px;
   --radius-xxl: 16px;
   --radius-dock: 20px;
   --radius-full: 9999px;

   /* ─────────────────────────────────────────────────────────────────────────
     1.9 TYPOGRAPHY

     Two fonts only:
     - Averia Serif Libre: Display/headings (warm, characterful serif)
     - Instrument Sans: Body/UI (clean, readable sans-serif)

     Scale: 1.25 (Major Third) for elegant progression
     Base: 16px (1rem) for accessibility
     ───────────────────────────────────────────────────────────────────────── */

   /* Font families - use CSS variables from Next.js font loading */
   --font-display: var(--font-averia), 'Averia Serif Libre', Georgia, 'Times New Roman', serif;
   --font-body: var(--font-instrument), 'Instrument Sans', system-ui, -apple-system, sans-serif;
   --font-mono: ui-monospace, 'SF Mono', 'Cascadia Code', monospace;

   /* Legacy alias for backwards compatibility */
   --font-family: var(--font-body);

   /* Font weights */
   --font-weight-normal: 400;
   --font-weight-medium: 500;
   --font-weight-semibold: 600;
   --font-weight-bold: 700;

   /*
    * Type Scale (Major Third - 1.25 ratio)
    * Using rem for accessibility (respects user font-size preferences)
    * Using clamp() for fluid scaling between viewport sizes
    *
    * Scale: 0.64 → 0.8 → 1 → 1.25 → 1.563 → 1.953 → 2.441 → 3.052
    */

   /* Small text - UI labels, captions, metadata */
   --font-size-xs: clamp(0.625rem, 0.6rem + 0.125vw, 0.75rem);     /* 10-12px */
   --font-size-sm: clamp(0.75rem, 0.725rem + 0.125vw, 0.875rem);   /* 12-14px */

   /* Base text - body copy, paragraphs */
   --font-size-base: clamp(0.875rem, 0.85rem + 0.125vw, 1rem);     /* 14-16px */

   /* Medium text - emphasized body, large UI */
   --font-size-md: clamp(1rem, 0.95rem + 0.25vw, 1.125rem);        /* 16-18px */
   --font-size-lg: clamp(1.125rem, 1.05rem + 0.375vw, 1.25rem);    /* 18-20px */

   /* Headings - display typography */
   --font-size-xl: clamp(1.25rem, 1.15rem + 0.5vw, 1.5rem);        /* 20-24px - h4 */
   --font-size-2xl: clamp(1.5rem, 1.35rem + 0.75vw, 1.875rem);     /* 24-30px - h3 */
   --font-size-3xl: clamp(1.875rem, 1.65rem + 1.125vw, 2.5rem);    /* 30-40px - h2 */
   --font-size-4xl: clamp(2.5rem, 2.1rem + 2vw, 3.5rem);           /* 40-56px - h1 */
   --font-size-5xl: clamp(3rem, 2.5rem + 2.5vw, 4.5rem);           /* 48-72px - display */

   /* Line heights - tighter for headings, looser for body */
   --line-height-none: 1;
   --line-height-tight: 1.15;      /* Headings */
   --line-height-snug: 1.3;        /* Subheadings */
   --line-height-normal: 1.5;      /* Body text - optimal for reading */
   --line-height-relaxed: 1.65;    /* Long-form content */
   --line-height-loose: 1.8;       /* Very relaxed */

   /* Letter spacing */
   --letter-spacing-tighter: -0.03em;  /* Large display text */
   --letter-spacing-tight: -0.015em;   /* Headings */
   --letter-spacing-normal: 0;         /* Body text */
   --letter-spacing-wide: 0.025em;     /* Small caps, labels */
   --letter-spacing-wider: 0.05em;     /* All caps text */

   /* Paragraph spacing (vertical rhythm based on line-height) */
   --paragraph-spacing: 1.5em;

   /* ─────────────────────────────────────────────────────────────────────────
     1.10 SPACING SCALE (8-point grid)

     Consistent spacing creates visual rhythm and harmony.
     All spacing values are multiples of 4px (base unit).
     Use these instead of arbitrary pixel values.
     ───────────────────────────────────────────────────────────────────────── */
   --space-0: 0;
   --space-1: 4px;      /* Tight: icon padding, inline gaps */
   --space-2: 8px;      /* Compact: button padding, small gaps */
   --space-3: 12px;     /* Default: card padding, list gaps */
   --space-4: 16px;     /* Comfortable: section gaps, medium padding */
   --space-5: 20px;     /* Relaxed: card margins */
   --space-6: 24px;     /* Spacious: section padding */
   --space-8: 32px;     /* Large: major section gaps */
   --space-10: 40px;    /* Extra large: page margins */
   --space-12: 48px;    /* Hero sections */
   --space-16: 64px;    /* Major page sections */
   --space-20: 80px;    /* Full-bleed sections */
   --space-24: 96px;    /* Large hero areas */

   /* ─────────────────────────────────────────────────────────────────────────
     1.11 BLUR / GLASSMORPHISM
     ───────────────────────────────────────────────────────────────────────── */
   --blur-subtle: 12px;
   --blur-medium: 20px;
   --blur-heavy: 24px;

   /* ─────────────────────────────────────────────────────────────────────────
     1.12 TRANSITIONS
     ───────────────────────────────────────────────────────────────────────── */
   --transition-fast: 150ms;
   --transition-medium: 200ms;
   --transition-slow: 300ms;
   --ease-out: cubic-bezier(0.4, 0, 0.2, 1);
   --ease-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);

   /* ─────────────────────────────────────────────────────────────────────────
     1.13 FOCUS STATES

     Accessible focus indicators using the accent color.
     All interactive elements should show these on :focus-visible.
     ───────────────────────────────────────────────────────────────────────── */
   --focus-ring-color: var(--color-accent-primary);
   --focus-ring-width: 2px;
   --focus-ring-offset: 2px;
   --focus-ring: 0 0 0 var(--focus-ring-offset) var(--color-bg-base),
                 0 0 0 calc(var(--focus-ring-offset) + var(--focus-ring-width)) var(--focus-ring-color);

   /* ─────────────────────────────────────────────────────────────────────────
     1.14 INTERACTIVE STATES

     Consistent opacity values for disabled and loading states.
     ───────────────────────────────────────────────────────────────────────── */
   --opacity-disabled: 0.5;
   --opacity-hover: 0.9;
   --opacity-loading: 0.7;
   --opacity-placeholder: 0.5;

   /* ─────────────────────────────────────────────────────────────────────────
     1.15 COMPONENT DIMENSIONS
     ───────────────────────────────────────────────────────────────────────── */
   /* Menu Bar */
   --menubar-height: 36px;
   --menubar-margin: 12px;

   /* Dock */
   --dock-padding: 10px 16px;
   --dock-icon-size: 44px;
   --dock-icon-radius: 12px;
   --dock-icon-gap: 8px;
   --dock-active-dot-size: 4px;
   --dock-badge-size: 16px;

   /* Desktop Icons */
   --desktop-icon-size: 64px;
   --desktop-icon-radius: 16px;
   --desktop-icon-label-max-width: 80px;
   --desktop-icon-gap: 6px;

   /* Windows */
   --window-titlebar-height: 52px;
   --window-radius: 12px;
   --window-traffic-size: 12px;
   --window-traffic-gap: 8px;

   /* Status Widget */
   --status-padding: 14px 18px;
   --status-radius: 14px;
   --status-dot-size: 10px;
   --status-arrow-size: 32px;

   /* Context Menu */
   --context-menu-radius: 12px;
   --context-menu-item-height: 32px;
   --context-menu-min-width: 180px;

   /* Inputs */
   --input-radius: 10px;
   --input-padding: 10px 14px;
   --input-focus-ring: 3px;

   /* ─────────────────────────────────────────────────────────────────────────
     1.16 Z-INDEX SCALE

     Layering system to prevent z-index wars.
     Always use these tokens instead of arbitrary numbers.
     ───────────────────────────────────────────────────────────────────────── */
   --z-desktop: 0;
   --z-desktop-icons: 10;
   --z-window-base: 100;
   --z-window-active: 200;
   --z-dock: 300;
   --z-menubar: 400;
   --z-dropdown: 500;
   --z-modal-backdrop: 600;
   --z-modal: 700;
   --z-tooltip: 800;
   --z-status-widget: 350;

   /* ─────────────────────────────────────────────────────────────────────────
     1.17 SKEUOMORPHIC / PHYSICAL DESIGN (Braun/Rams inspired)

     Premium physical objects: white plastic housings, depth, tactility.
     Orange accent color used sparingly for indicators.
     ───────────────────────────────────────────────────────────────────────── */

   /* Physical housing colors */
   --physical-housing: #f8f8f6;
   --physical-housing-light: #ffffff;
   --physical-housing-dark: #e8e8e4;
   --physical-face: #fefefe;
   --physical-face-cream: #fdfbf7;

   /* Orange indicator (Braun signature) */
   --indicator-orange: #ff6b00;
   --indicator-orange-glow: rgba(255, 107, 0, 0.5);

   /* Physical depth shadows - layered for realistic depth */
   --shadow-physical-sm:
      0 1px 1px rgba(0, 0, 0, 0.04),
      0 2px 4px rgba(0, 0, 0, 0.04),
      0 4px 8px rgba(0, 0, 0, 0.04);

   --shadow-physical-md:
      0 1px 2px rgba(0, 0, 0, 0.06),
      0 4px 8px rgba(0, 0, 0, 0.06),
      0 8px 16px rgba(0, 0, 0, 0.06),
      0 16px 32px rgba(0, 0, 0, 0.04);

   --shadow-physical-lg:
      0 2px 4px rgba(0, 0, 0, 0.08),
      0 8px 16px rgba(0, 0, 0, 0.08),
      0 16px 32px rgba(0, 0, 0, 0.06),
      0 32px 64px rgba(0, 0, 0, 0.04);

   /* Inner shadows for recessed areas */
   --shadow-inset-subtle: inset 0 1px 2px rgba(0, 0, 0, 0.06);
   --shadow-inset-medium: inset 0 2px 4px rgba(0, 0, 0, 0.08);
   --shadow-inset-ring: inset 0 0 0 1px rgba(0, 0, 0, 0.04);

   /* Top highlight for physical objects */
   --highlight-top: inset 0 1px 0 rgba(255, 255, 255, 0.8);
   --highlight-top-strong: inset 0 2px 0 rgba(255, 255, 255, 0.9);

   /* Physical button states */
   --shadow-button-raised:
      0 1px 1px rgba(0, 0, 0, 0.06),
      0 2px 4px rgba(0, 0, 0, 0.06),
      0 4px 8px rgba(0, 0, 0, 0.04),
      inset 0 1px 0 rgba(255, 255, 255, 0.8);

   --shadow-button-pressed:
      0 1px 2px rgba(0, 0, 0, 0.04),
      inset 0 1px 3px rgba(0, 0, 0, 0.1);

   /* Physical dock styling */
   --dock-physical-bg: linear-gradient(180deg, #ffffff 0%, #f4f4f2 100%);
   --dock-physical-shadow:
      0 2px 4px rgba(0, 0, 0, 0.06),
      0 8px 24px rgba(0, 0, 0, 0.1),
      0 16px 48px rgba(0, 0, 0, 0.06),
      inset 0 1px 0 rgba(255, 255, 255, 0.9),
      inset 0 -1px 0 rgba(0, 0, 0, 0.03);

   --dock-physical-border: 1px solid rgba(0, 0, 0, 0.06);

   /* Physical widget housing */
   --widget-physical-bg: linear-gradient(180deg, #ffffff 0%, #f8f8f6 100%);
   --widget-physical-shadow:
      0 2px 4px rgba(0, 0, 0, 0.06),
      0 8px 20px rgba(0, 0, 0, 0.08),
      0 20px 48px rgba(0, 0, 0, 0.06),
      inset 0 1px 0 rgba(255, 255, 255, 0.9);

   --widget-physical-border: 1px solid rgba(0, 0, 0, 0.05);

   /* Clock face styling */
   --clock-face-bg: linear-gradient(180deg, #ffffff 0%, #fafaf8 100%);
   --clock-bezel-bg: linear-gradient(180deg, #f0f0ee 0%, #e4e4e0 100%);
   --clock-hand-black: #1a1a1a;
   --clock-hand-orange: var(--indicator-orange);
}

/* =============================================================================
   2. SCROLLBAR STYLING
   Minimal, appears on hover - respects the warm aesthetic
   ============================================================================= */

* {
   scrollbar-width: thin;
   scrollbar-color: transparent transparent;
}

*:hover {
   scrollbar-color: var(--color-border-strong) transparent;
}

::-webkit-scrollbar {
   width: 8px;
   height: 8px;
}

::-webkit-scrollbar-track {
   background: transparent;
}

::-webkit-scrollbar-thumb {
   background: transparent;
   border-radius: var(--radius-full);
   transition: background var(--transition-medium) var(--ease-out);
}

*:hover::-webkit-scrollbar-thumb {
   background: rgba(23, 20, 18, 0.2);
}

*:hover::-webkit-scrollbar-thumb:hover {
   background: rgba(23, 20, 18, 0.35);
}

/* =============================================================================
   3. SELECTION STYLING
   Text selection uses accent color for brand consistency
   ============================================================================= */

::selection {
   background: var(--color-accent-primary-subtle, rgba(255, 119, 34, 0.25));
   color: var(--color-text-primary, #171412);
}

::-moz-selection {
   background: var(--color-accent-primary-subtle, rgba(255, 119, 34, 0.25));
   color: var(--color-text-primary, #171412);
}

/* Drag selection box */
.selection-box {
   background: var(--color-accent-primary-subtle);
   border: 1px solid rgba(255, 119, 34, 0.4);
}

/* =============================================================================
   4. REDUCED MOTION
   Respects user accessibility preferences (WCAG 2.1 requirement)
   ============================================================================= */

@media (prefers-reduced-motion: reduce) {
   :root {
      --transition-fast: 0ms;
      --transition-medium: 0ms;
      --transition-slow: 0ms;
   }

   *,
   *::before,
   *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
   }
}

/* =============================================================================
   5. UTILITY CLASSES
   Use sparingly - prefer component-specific styles
   ============================================================================= */

.visually-hidden {
   position: absolute;
   width: 1px;
   height: 1px;
   padding: 0;
   margin: -1px;
   overflow: hidden;
   clip: rect(0, 0, 0, 0);
   white-space: nowrap;
   border: 0;
}

/* Focus ring utility - apply to interactive elements */
.focus-ring:focus-visible {
   outline: none;
   box-shadow: var(--focus-ring);
}

/* Disabled state utility */
.disabled,
[disabled] {
   opacity: var(--opacity-disabled);
   pointer-events: none;
   cursor: not-allowed;
}